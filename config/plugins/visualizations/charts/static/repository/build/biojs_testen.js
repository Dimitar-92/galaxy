define(function(){return function(t){function e(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return t[r].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){var r,a;r=[n(13)],a=function(t){return Backbone.Model.extend({initialize:function(e){var n=e.chart;e.dataset,e.chart.settings;console.log(t),data=[{direction:null,object:"disease1",type:"diseases1",value:.7139138126389065,subject:"EFO_0004591"},{direction:null,object:"disease1",type:"diseases3",value:.7139138126389065,subject:"EFO_0004591"}];var r=t().read("http://partizanos.github.io/VizTargetDiseases/data/sample.json");r(document.getElementById(e.targets[0]+"")),n.state("ok","Chart drawn."),e.process.resolve()}})}.apply(e,r),!(void 0!==a&&(t.exports=a))},,,,,,,,,function(t,e,n){t.exports=n(10)},function(t,e){var n=function(t){var e=function(){var t=[];return t.add_batch=function(e){t.unshift(e)},t.update=function(e,n){for(var r=0;r<t.length;r++)for(var a in t[r])if(a===e)return t[r][a]=n,!0;return!1},t.add=function(e,n){if(t.update(e,n));else{var r={};r[e]=n,t.add_batch(r)}},t.get=function(e){for(var n=0;n<t.length;n++)for(var r in t[n])if(r===e)return t[n][r]},t},n=e(),r=function(){};r.check=function(e,n,a){if(!(e instanceof Array))return"function"==typeof e?e.check(n,a):t[e].check(n,a),r;for(var o=0;o<e.length;o++)r.check(e[o],n,a)},r.transform=function(e,n){if(!(e instanceof Array))return"function"==typeof e?e.transform(n):t[e].transform(n),r;for(var a=0;a<e.length;a++)r.transform(e[a],n)};var a=function(e,r){var a=[],o=[],l=r.on_getter||function(){return n.get(e)},i=r.on_setter||function(t){for(var r=0;r<o.length;r++)t=o[r](t);for(var l=0;l<a.length;l++)if(!a[l].check(t)){var i=a[l].msg||"Value "+t+" doesn't seem to be valid for this method";throw i}n.add(e,t)},s=function(e){return arguments.length?(i(e),t):l()};s.check=function(t,e){return arguments.length?(a.push({check:t,msg:e}),this):a},s.transform=function(t){return arguments.length?(o.push(t),this):o},t[e]=s},o=function(t,e){if("object"==typeof t){n.add_batch(t);for(var r in t)a(r,e)}else n.add(t,e.default_value),a(t,e)};return r.getset=function(t,e){return o(t,{default_value:e}),r},r.get=function(t,e){var n=function(){throw"Method defined only as a getter (you are trying to use it as a setter"};return o(t,{default_value:e,on_setter:n}),r},r.set=function(t,e){var n=function(){throw"Method defined only as a setter (you are trying to use it as a getter"};return o(t,{default_value:e,on_getter:n}),r},r.method=function(e,n){if("object"==typeof e)for(var a in e)t[a]=e[a];else t[e]=n;return r},r};t.exports=e=n},function(t,e,n){t.exports=tooltip=n(12)},function(t,e,n){var r=n(9),a=function(){"use strict";function t(e,n){if(n=n.toLowerCase(),null===e.parentNode)return void console.log("No more parents");var r=e.parentNode.tagName;return void 0!==r&&r.toLowerCase()===n?e.parentNode:t(e.parentNode,n)}var e,n=d3.behavior.drag(),a={position:"right",allow_drag:!0,show_closer:!0,fill:function(){throw"fill is not defined in the base object"},width:180,id:1},o=function(r,l){n.origin(function(){return{x:parseInt(d3.select(this).style("left")),y:parseInt(d3.select(this).style("top"))}}).on("drag",function(){a.allow_drag&&d3.select(this).style("left",d3.event.x+"px").style("top",d3.event.y+"px")});var i=t(this,"div");if(void 0!==i){e=d3.select(i).append("div").attr("class","tnt_tooltip").classed("tnt_tooltip_active",!0).call(n),d3.select("#tnt_tooltip_"+a.id).remove(),null===d3.event&&l&&(d3.event=l);var s=d3.mouse(i);d3.event=null;var c=0;return"left"===a.position&&(c=a.width),e.attr("id","tnt_tooltip_"+a.id),e.style("left",s[0]-c+"px").style("top",s[1]+"px"),a.show_closer&&e.append("div").attr("class","tnt_tooltip_closer").on("click",function(){o.close()}),a.fill.call(e.node(),r),o}},l=r(o).getset(a);return l.check("position",function(t){return"left"===t||"right"===t},"Only 'left' or 'right' values are allowed for position"),l.method("close",function(){e&&e.remove()}),o};a.list=function(){var t=a();return t.fill(function(e){var n=d3.select(this),r=n.append("table").attr("class","tnt_zmenu").attr("border","solid").style("width",t.width()+"px");e.header&&r.append("tr").attr("class","tnt_zmenu_header").append("th").text(e.header);var a=r.selectAll(".tnt_zmenu_row").data(e.rows).enter().append("tr").attr("class","tnt_zmenu_row");a.append("td").style("text-align","center").html(function(t,n){return e.rows[n].value}).each(function(e){void 0!==e.link&&d3.select(this).classed("link",1).on("click",function(e){e.link(e.obj),t.close.call(this)})})}),t},a.table=function(){var t=a();return t.fill(function(e){var n=d3.select(this),r=n.append("table").attr("class","tnt_zmenu").attr("border","solid").style("width",t.width()+"px");e.header&&r.append("tr").attr("class","tnt_zmenu_header").append("th").attr("colspan",2).text(e.header);var a=r.selectAll(".tnt_zmenu_row").data(e.rows).enter().append("tr").attr("class","tnt_zmenu_row");a.append("th").attr("colspan",function(t,e){return""===t.value?2:1}).attr("class",function(t){return""===t.value?"tnt_zmenu_inner_header":"tnt_zmenu_cell"}).html(function(t,n){return e.rows[n].label}),a.append("td").html(function(t,n){return"function"!=typeof e.rows[n].value?e.rows[n].value:void e.rows[n].value.call(this,t)}).each(function(t){""===t.value&&d3.select(this).remove()}).each(function(e){void 0!==e.link&&d3.select(this).classed("link",1).on("click",function(e){e.link(e.obj),t.close.call(this)})})}),t},a.plain=function(){var t=a();return t.fill(function(e){var n=d3.select(this),r=n.append("table").attr("class","tnt_zmenu").attr("border","solid").style("width",t.width()+"px");e.header&&r.append("tr").attr("class","tnt_zmenu_header").append("th").text(e.header),e.body&&r.append("tr").attr("class","tnt_zmenu_row").append("td").style("text-align","center").html(e.body)}),t},t.exports=e=a},function(t,e,n){var r=n(11),a="myCss";if(!document.getElementById(a)){var o=document.getElementsByTagName("head")[0],l=document.createElement("link");l.id=a,l.rel="stylesheet",l.type="text/css",l.href="../build/viz_diseases.css",l.media="all",o.appendChild(l)}var i=function(){"use strict";function t(t,e){var n=[d3.scale.linear().domain([0,.2]).range([0,1*t/5]).clamp(!0),d3.scale.linear().domain([.2,.4]).range([1*t/5,2*t/5]).clamp(!0),d3.scale.linear().domain([.4,.6]).range([2*t/5,3*t/5]).clamp(!0),d3.scale.linear().domain([.6,.8]).range([3*t/5,4*t/5]).clamp(!0),d3.scale.linear().domain([.8,1]).range([4*t/5,5*t/5]).clamp(!0)];if(!e)return n;for(var r=[],a=0,o=0;o<n.length;o++){var l=n[o];e.domain()[0]==l.domain()[0]?(l.range([a,t]),a=t):l.range([a,a]),r.push(l)}return r}function e(t){var e={};e.header=t.object,e.rows=[],e.rows.push({label:"type",value:t.type}),e.rows.push({label:"Value:",value:String(100*t.value).slice(0,5)}),r.table().width(180).show_closer(!0).call(this,e)}function n(t){c.each(function(e){var n=this;t.object===e.object?d3.select(n).classed("unselected",!1).classed("selected",!0):d3.select(n).classed("selected",!1).classed("unselected",!0)}),s.each(function(e){var n=this;t.object===e.object?d3.select(n).classed("unselected",!1).classed("selected",!0):d3.select(n).classed("selected",!1).classed("unselected",!0)}),i.each(function(e){var n=this;e.object===t.object?d3.select(n).classed("unselected",!1).classed("selected",!0):d3.select(n).classed("selected",!1).classed("unselected",!0)})}function a(){c.each(function(){d3.select(this).classed("selected",!1).classed("unselected",!0)}),s.each(function(){d3.select(this).classed("selected",!0).classed("unselected",!1)}),i.each(function(){d3.select(this).classed("selected",!0).classed("unselected",!1)})}function o(t,e){var n=t*Math.cos(e),r=t*Math.sin(e);return[n,r]}var l,i,s,c,d,u={allColorsExp:[],fontSize:"10px",pointSize:3.5,pointColor:"navy",size:700,filter:null,data:[{direction:null,object:"disease1",type:"diseases1",value:.7139138126389065,subject:"EFO_0004591"},{direction:null,object:"disease1",type:"diseases2",value:.7139138126389065,subject:"EFO_0004591"},{direction:null,object:"disease1",type:"diseases3",value:.7139138126389065,subject:"EFO_0004591"}]},p=100,f=1e3,h=function(r){var v=u.size-2*p,g=v/2;d3.select(r).append("div").attr("id","sequence").attr("width",u.size).attr("height",30);var m=d3.select(r).append("svg").attr("width",u.size).attr("height",u.size).append("g").attr("transform","translate("+(g+p)+","+(g+p)+")").attr("id","pieChart"),y=d3.scale.linear().domain([0,1]).range([d3.rgb(0,82,163),d3.rgb(182,221,252)]),_={w:100,h:30,s:3,t:10};h.update=function(r,p,b,x){function w(t){return function(e,n){return e[t]>n[t]?1:e[t]<n[t]?-1:0}}function A(t,e){var n=parseInt(t.slice(1),16),r=e<0?0:255,a=e<0?e*-1:e,o=n>>16,l=n>>8&255,i=255&n;return"#"+(16777216+65536*(Math.round((r-o)*a)+o)+256*(Math.round((r-l)*a)+l)+(Math.round((r-i)*a)+i)).toString(16).slice(1)}function z(t){return d3.scale.linear().domain([0,1]).range(I[t])}function j(t){function e(t,e){var n=[];return n.push("0,0"),n.push(_.w+",0"),n.push(_.w+_.t+","+_.h/2),n.push(_.w+","+_.h),n.push("0,"+_.h),e>0&&n.push(_.t+","+_.h/2),n.join(" ")}function n(){R=d3.selectAll("#pieChart .ring");d3.selectAll("#pieChart line");d3.selectAll("#pieChart text").style("opacity",0);d3.selectAll("#pieChart circle");R.transition().duration(200).style("opacity",0),d3.selectAll("#pieChart line").remove(),d3.selectAll("#pieChart .openTargets_d-d_overview_label").remove(),d3.selectAll("#pieChart circle").remove(),d3.selectAll("#sequence g").remove(),j([{name:"Home"}]),setTimeout(function(){d3.selectAll("#pieChart .ring").remove(),N=N.data(E(d)).attr("fill",function(t,e){return I[t.data.type][0]}),N.transition().duration(500).attrTween("d",function(t){var e=d3.interpolate(this._current,t);return this._current=e(0),function(t){return S(e(t))}}),d3.selectAll("#pieChart text").transition().duration(600).style("opacity",1)},500)}d3.selectAll("#trail").remove();var r=(d3.select("#sequence").append("svg:svg").style("width",u.size).style("height",30).attr("id","trail"),d3.select("#trail").selectAll("g").data(t,function(t){return t.name+t.depth})),a=r.enter().append("svg:g");a.append("svg:polygon").attr("points",e).style("fill",function(t){return"Home"==t.name?"#DCDCDC":I[t.name][1]}).on("click",function(t,e){"Home"==this.parentNode.childNodes[1].innerHTML&&n()}),a.append("svg:text").attr("x",(_.w+_.t)/2).attr("y",_.h/2).attr("dy","0.35em").attr("text-anchor","middle").text(function(t){var e;return e=t.name.length>11?t.name.substring(0,10)+"...":t.name}).on("click",function(t,e){"Home"==this.innerHTML&&n()}),r.attr("transform",function(t,e){return"translate("+e*(_.w+_.s)+", 0)"})}function C(t){var d=[];for(m in r)r[m].type==t&&d.push(r[m]);for(var h=0,m=0;m<d.length;m++){var y=d[m],_=p[~~((1-y.value)/.2)],b=o(_(1-y.value),h);y.x=b[0],y.y=b[1],y.angle=h,h+=2*Math.PI/d.length}c=l.selectAll(".openTargets_d-d_overview_link").data(d,function(t){return t.object+"-"+t.subject}),c.enter().append("line").style("stroke","navy").attr("class","openTargets_d-d_overview_link unselected"),c.transition().duration(f).attr("x1",function(t){return t.x}).attr("y1",function(t){return t.y}).attr("x2",function(t){return g*Math.cos(t.angle)}).attr("y2",function(t){return g*Math.sin(t.angle)}),i=l.selectAll(".openTargets_d-d_overview_node").data(d,function(t){return t.object+"-"+t.subject}),i.enter().append("circle").attr("class","openTargets_d-d_overview_node selected").on("mouseout",a).on("mouseover",n).on("click",e),i.transition().duration(f).attr("cx",function(t){return t.x}).attr("cy",function(t){return t.y}).attr("r",u.pointSize).attr("fill",u.pointColor),l.selectAll(".openTargets_d-d_overview_label").remove(),s=l.selectAll(".openTargets_d-d_overview_label").data(d,function(t){return t.object+"-"+t.subject}),s.enter().append("g").attr("class","openTargets_d-d_overview_label selected").attr("transform",function(t){var e=(360*t.angle/(2*Math.PI),v/2*Math.cos(t.angle)),n=v/2*Math.sin(t.angle);return"translate("+e+","+n+")"}).append("text").style("font-size",u.fontSize).style("text-anchor",function(t){var e=360*t.angle/(2*Math.PI);return e%360>90&&e%360<275?"end":"start"}).text(function(t){return t.object}).attr("transform",function(t){var e=360*t.angle/(2*Math.PI);return e%360>90&&e%360<275?"rotate("+(e%360+180)+")":"rotate("+e%360+")"}).on("mouseover",n).on("mouseout",a).on("click",e)}if("pieChart"==b){d3.selectAll("#sequence svg").remove(),d3.selectAll("g text").remove(),d3.selectAll("line").remove(),d3.selectAll("circle").remove(),j([{name:"Home"}]),r.sort(w("type"));for(var M={},k=0;k<r.length;k++)void 0==M[r[k].type]&&(M[r[k].type]=[]),M[r[k].type].push(r[k]);d=[];for(k in M)d.push({type:k,population:M[k].length/r.length,count:M[k].length});d.sort(function(t,e){return t.population>e.population?-1:t.population<e.population?1:0});var T=[];for(k=0;k<10;k++)T.push([d3.scale.category20().range()[2*k],d3.scale.category20().range()[2*k+1]]);var I={};if(0!=u.allColorsExp.length)for(k=0;k<u.allColorsExp.length;k++)I[d[k].type]=[u.allColorsExp[k],A(u.allColorsExp[k],.8)];for(k=u.allColorsExp.length;k<d.length;k++)I[d[k].type]=[d3.scale.category20().range()[k%10*2],d3.scale.category20().range()[k%10*2+1]];for(var P=[],k=0;k<1;k++){var S=d3.svg.arc().outerRadius(g-k*g).innerRadius(g-k*g-g);P.push(S)}var E=(d3.svg.arc().outerRadius(g-40).innerRadius(g-40),d3.layout.pie().sort(null).value(function(t){return t.population})),S=d3.svg.arc().outerRadius(g).innerRadius(0),N=m.selectAll("path").data(E(d)).enter().append("path").attr("fill",function(t,e){return I[t.data.type][0]}).attr("d",S).each(function(t){this._current=t}).on("click",function(e){d3.selectAll("#pieChart text").style("opacity",0);var n=JSON.parse(JSON.stringify(d));for(var a in n)n[a].type==e.data.type?n[a].population=1:n[a].population=0;N=N.data(E(n)).attr("fill",function(t,e){return I[t.data.type][0]}),N.transition().duration(500).attrTween("d",function(t){var e=d3.interpolate(this._current,t);return this._current=e(0),function(t){return S(e(t))}}),setTimeout(function(){var n=e.data.type;j([{name:"Home",depth:0},{name:n,depth:1}]),l=d3.select("#pieChart");var a=l.selectAll(".ring").data(p);a.enter().append("path").style("opacity",0).attr("class","ring").attr("fill",function(t){return z(n)(t.domain()[0])}).attr("d",function(t){var e=d3.svg.arc().innerRadius(t.range()[0]).outerRadius(t.range()[1]).startAngle(0).endAngle(2*Math.PI);return e(t)}).attr("id",function(t,e){return"ring"+e}),a.transition().delay(function(t,e){return 50*e}).duration(100).style("opacity",1),a.on("click",function(e,a){var o=d3.select(this);o.classed("zoomed")?(o.classed("zoomed",!1),h.update(r,t(g),"rings",n)):(o.classed("zoomed",!0),h.update(r,t(g,e),"rings",n))}),C(n),d3.selection.prototype.moveToFront=function(){return this.each(function(){this.parentNode.appendChild(this)})},d3.selectAll("circle").moveToFront(),d3.selectAll("line").moveToFront()},600)});N.each(function(t){m.append("text").attr("fill","#fff").style("margin","3px").attr("transform",function(){var e=(t.startAngle+t.endAngle)/2*180/Math.PI;if(e>0&&e<180){var n=(-200+v)/2*Math.cos((t.startAngle+t.endAngle)/2-Math.PI/2),r=(-200+v)/2*Math.sin((t.startAngle+t.endAngle)/2-Math.PI/2);return"translate("+n+","+r+") rotate("+(e-90)+")"}var n=(-25+v)/2*Math.cos((t.startAngle+t.endAngle)/2-Math.PI/2),r=(-25+v)/2*Math.sin((t.startAngle+t.endAngle)/2-Math.PI/2);return"translate("+n+","+r+") rotate("+(e-90+180)+")"}).style("font-size",u.fontSize).attr("dy",".35em").text(function(){return t.data.type+" "+t.data.count})})}else if("rings"==b){var R=l.selectAll(".ring").data(p);R.enter().append("path").attr("class","ring").attr("fill",function(t){return y(t.domain()[0])}).attr("d",function(t){var e=d3.svg.arc().innerRadius(t.range()[0]).outerRadius(t.range()[1]).startAngle(0).endAngle(2*Math.PI);return e(t)}).attr("id",function(t,e){return"ring"+e}).on("click",function(e,n){var a=d3.select(this);a.classed("zoomed")?(a.classed("zoomed",!1),h.update(r,t(g))):(a.classed("zoomed",!0),h.update(r,t(g,e)))}),R.transition().duration(f).attr("d",function(t,e){var n=d3.svg.arc().innerRadius(p[e].range()[0]+.1).outerRadius(p[e].range()[1]+.1).startAngle(0).endAngle(2*Math.PI);return n(t,e)});var F=[];for(k in r)r[k].type==x&&F.push(r[k]);for(var H=(2*Math.PI*360/F.length,0),k=0;k<F.length;k++){var O=F[k],q=p[~~((1-O.value)/.2)],B=o(q(1-O.value),H);O.x=B[0],O.y=B[1],O.angle=H,H+=2*Math.PI/F.length}c=l.selectAll(".openTargets_d-d_overview_link").data(F,function(t){return t.object+"-"+t.subject}),c.enter().append("line").style("stroke","navy").attr("class","openTargets_d-d_overview_link unselected"),c.transition().duration(f).attr("x1",function(t){return t.x}).attr("y1",function(t){return t.y}).attr("x2",function(t){return g*Math.cos(t.angle)}).attr("y2",function(t){return g*Math.sin(t.angle)}),i=l.selectAll(".openTargets_d-d_overview_node").data(F,function(t){return t.object+"-"+t.subject}),i.enter().append("circle").attr("class","openTargets_d-d_overview_node selected").on("mouseout",a).on("mouseover",n).on("click",e),i.transition().duration(f).attr("cx",function(t){return t.x}).attr("cy",function(t){return t.y}).attr("r",u.pointSize).attr("fill",u.pointColor),l.selectAll(".openTargets_d-d_overview_label").remove(),s=l.selectAll(".openTargets_d-d_overview_label").data(F,function(t){return t.object+"-"+t.subject}),s.enter().append("g").attr("class","openTargets_d-d_overview_label selected").attr("transform",function(t){var e=(360*t.angle/(2*Math.PI),v/2*Math.cos(t.angle)),n=v/2*Math.sin(t.angle);return"translate("+e+","+n+")"}).append("text").style("font-size",u.fontSize).style("text-anchor",function(t){var e=360*t.angle/(2*Math.PI);return e%360>90&&e%360<275?"end":"start"}).text(function(t){return t.object}).attr("transform",function(t){var e=360*t.angle/(2*Math.PI);return e%360>90&&e%360<275?"rotate("+(e%360+180)+")":"rotate("+e%360+")"}).on("mouseover",n).on("mouseout",a).on("click",e)}},"string"==typeof u.data?d3.json(u.data,function(e,n){var r=n.data;h.update(r,t(g),"pieChart")}):h.update(u.data,t(g),"pieChart")};return h.read=function(t){return arguments.length?(u.data=t,this):u.data},h.size=function(t){return arguments.length?(u.size=t,this):u.size},h.setPieColors=function(t){return arguments.length?(u.allColorsExp=t,this):u.allColorsExp},h.setFontSize=function(t){return arguments.length?("number"==typeof t&&(t=String(t+"px")),u.fontSize=t,this):u.fontSize},h.setPointSize=function(t){return arguments.length?(u.pointSize=t,this):u.pointSize},h.setPointColor=function(t){return arguments.length?(u.pointColor=t,this):u.pointColor},h.filter_type=function(t){i.style("display",function(e){return t&&e.type!==t?"none":"block"})},h};t.exports=e=i}])});
//# sourceMappingURL=biojs_testen.js.map